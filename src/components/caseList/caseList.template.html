<md-toolbar class="md-toolbar-tools md-whiteframe-z2">
      <h3 class="view-frame" >Case List</h3>
</md-toolbar>
<md-content class="view-frame">
  
  <md-progress-circular class="progress-circular" 
                        mode="md-indeterminate"
                        ng-if="vm.waiting">

  </md-progress-circular>

  <!-- Search Box -->
  <div flex="25" flex-offset="60">
        <md-input-container>
          <label><md-icon>search</md-icon> search cases</label>
          <input class="md-title" type="search" ng-model="vm.query"></input>
        </md-input-container>
  </div>
  
  <md-list>
      <md-list-item layout="row" layout-wrap layout-align="space-between" >
      <h4 flex-gt-xs="10" flex="25" flex-offset-gt-xs="5" flex-offset-xs="10">Case #</h4>
      <h4 flex-gt-xs="20" flex md-truncate hide-xs>Property</h4>
      <h4 flex-gt-xs="20" flex hide-xs>Lender</h4>
      <h4 flex-gt-xs="15" flex >Borrower</h4>
      <h4 flex-gt-xs="15" flex >Loan Amount</h4>
      <h4 flex-gt-xs="15" flex >Sale Date</h4>
    </md-list-item>
  </md-list>

  <md-list ng-init="vm.selectedCase=null">
    <!-- list summary info for al cases -->
      <md-list-item ng-repeat="case in vm.caseList | filter:vm.query | orderBy:vm.orderProp : reverse = true"
                    class="case-list-item case-summary md-2-line md-long-text"
                    ng-click="vm.toggleSelected($index)">
            <md-button class="md-icon-button md-primary" ng-class="{'more-detail': vm.selectedCase != $index, 'less-detail': vm.selectedCase == $index}"
                 ng-click="vm.toggleSelected($index)">
               <md-icon ng-show="vm.selectedCase != $index">expand_more</md-icon>
               <md-icon ng-show="vm.selectedCase === $index">expand_less</md-icon>
           </md-button>
         <div class="md-list-item-text">  
           <div layout="row" layout-wrap>
             <div flex-gt-xs="10" flex="25" flex-offset-gt-xs="5" flex-offset-xs="10">{{case.caseId}}</div>
             <div flex-gt-xs="20" flex md-truncate hide-xs class="case-list-address">{{case.property.address}}</div>
             <div flex-gt-xs="20" flex md-truncate hide-xs>{{case.lender.name}}</div>
             <div flex-gt-xs="15" flex md-truncate >{{case.borrower.name}}</div>
             <div flex-gt-xs="15" flex md-truncate >{{case.loan.amount}}</div>
             <div flex-gt-xs="15" flex md-truncate >{{case.loan.saleDate}}</div>
             <md-button  ng-click="vm.gotoCase(case)"
                         class="md-secondary md-icon-button" 
                         style="position:absolute;right:3em" >
               <md-icon>create</md-icon>
             </md-button>
             <md-button  ng-click="vm.deleteCase($event, case)"
                         class="md-secondary md-icon-button" 
                         style="position:absolute;right:1em" >
               <md-icon>cancel</md-icon>
             </md-button>
            <ui-view flex="100" case-expanded="case" selected-case="vm.selectedCase" index="$index" ></ui-view>
           </div>
        </div> 
        <md-divider></md-divider>
      </md-list-item>
    
        </md-list>
      </md-content>
