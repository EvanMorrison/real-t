<!-- FAB -->

<md-toolbar class="toolbar md-whiteframe-z2">
  <h3>Case View</h3>
</md-toolbar>

<div ng-cloak>

<!-- Floating button for edit, save, etc. -->
    <md-fab-speed-dial  md-direction="up" 
                        class="md-fling md-fab-bottom-right"
                        style="position:fixed;top:auto;left:auto;right:20px;bottom:20px"
                        md-open="ctrl.isFABOpen"
                        ng-mouseenter="ctrl.isFABOpen=true"
                        ng-mouseleave="ctrl.isFABOpen=false"
                         >
    <md-fab-trigger md-mouseenter>
          <md-button  class="md-fab md-warn" 
                      aria-label="Actions..."
                      ng-if="!ctrl.isActiveEdit">
              <md-tooltip >Actions</md-tooltip>
              <md-icon >menu</md-icon>
          </md-button>
          <md-button  class="md-fab md-warn" 
                      ng-if="ctrl.isActiveEdit">
            <md-tooltip md-visible='true'
                        md-direction="bottom">
                        Edit Mode On</md-tooltip>
            <md-icon>edit</md-icon>
          </md-button>
    </md-fab-trigger>
    <md-fab-actions>
      <md-button  
                  class="md-fab md-mini md-raised md-hue-3"
                  aria-label="edit"
                  ng-disabled="ctrl.isActiveEdit"
                  ng-click="ctrl.isActiveEdit=!ctrl.isActiveEdit">
        <md-tooltip md-direction="left">edit mode</md-tooltip>
        <md-icon >edit</md-icon>
      </md-button>
    
      <md-button  class="md-fab md-mini md-raised md-hue-3"
                  aria-label="save"
                  ng-disabled="!ctrl.isActiveEdit"
                  ng-click="ctrl.saveChanges()">
        <md-tooltip md-direction="left">save changes</md-tooltip>
        <md-icon >save</md-icon>
      </md-button>
      <md-button  class="md-fab md-mini md-raised md-hue-3"
                  aria-label="cancel changes"
                  ng-disabled="!ctrl.isActiveEdit"
                  ng-click="ctrl.cancelChanges()">
        <md-tooltip md-direction="left">cancel without saving</md-tooltip>
        <md-icon >cancel</md-icon>
      </md-button>
    </md-fab-actions>
    </md-fab-speed-dial>
  <!-- Floating button for edit, save, etc. -->

  <!-- Search Box -->
  <div flex-gt-sm="50" flex-offset="50" layout="row">
        <form name="caseLookup" 
              style="margin-top:20px;padding:10px 10px 0;border:2px solid transparent;border-radius:60px;background-color:#efefee"
              >
          <md-input-container>
            <label for=""><md-icon>search</md-icon> look up case number</label>
            <input ng-model="ctrl.searchId"
                   class="md-headline"
                   type="search"
                   style="background-color:#f5f5f5">
            </input>
          </md-input-container>
          <md-button class="md-fab md-mini md-primary md-hue-3"
                     type="submit"
                     ng-click="ctrl.caseLookup($event)">
              go
          </md-button>
        </form>
  </div>
<!-- End Search Box -->

  <div flex-gt-sm="80" flex-offset="5" >
    <h1 >Case: {{ctrl.case.$id}}</h1>
  <div flex-gt-sm="80" flex-offset="5"
        ng-if="!ctrl.isCaseIdValid">
    <h1 class="md-headline">No Matches Found </h1>
  </div>
  </div>


<md-content layout-gt-sm="row" layout-align-gt-sm="center center" layout-wrap
            layout="column" flex 
            class="case-view-container"
            ng-if="ctrl.isCaseIdValid">




    <!-- Lender card -->
  <div flex-gt-sm="40">
    <md-card >
      <md-card-title>
        <md-card-title-text>
          <div  class="md-headline">Lender</div>
        </md-card-title-text>
      </md-card-title>
    
      <md-card-content>
            <div layout-sm="row" layout="column" flex-gt-sm="90">
              <div layout="column" flex="90" flex-offset="5">
                <md-input-container>
                  <label>Name</label>
                  <input  ng-model="ctrl.case.lender.name"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
                
                <md-input-container>
                  <label >Address</label>
                  <textarea ng-model="ctrl.case.lender.address"
                            style="text-align:left" 
                            max-rows="3"  
                            ng-readonly="!ctrl.isActiveEdit">
                          {{ctrl.case.lender.address}}
                  </textarea>
                </md-input-container>
              </div>
              
              <div layout="column" flex="90" flex-offset="5">
               <md-input-container>
                  <label>Phone</label>
                  <input  ng-model="ctrl.case.lender.phone"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
              
                <md-input-container>
                  <label>Email</label>
                  <input  ng-model="ctrl.case.lender.email"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
              </div>
            </div>
      </md-card-content>
    </md-card>
  </div>
    <!-- End Lender Card-->
    
    <!-- Borrower card -->
  <div flex-gt-sm="40">
    <md-card >
      <md-card-title>
        <md-card-title-text>
          <span class="md-headline">Borrower</span>
        </md-card-title-text>
      </md-card-title>
    
      <md-card-content>
         <div layout-sm="row" layout="column" flex-gt-sm="90">
              <div layout="column" flex="90" flex-offset="5">
                <md-input-container>
                  <label>Name</label>
                  <input  ng-model="ctrl.case.borrower.name"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
                
                <md-input-container>
                  <label >Address</label>
                  <textarea ng-model="ctrl.case.borrower.address"
                            style="text-align:left" 
                            max-rows="3"  
                            ng-readonly="!ctrl.isActiveEdit">
                          {{ctrl.case.borrower.address}}
                  </textarea>
                </md-input-container>
              </div>
              
              <div layout="column" flex="90" flex-offset="5">
               <md-input-container>
                  <label>Phone</label>
                  <input  ng-model="ctrl.case.borrower.phone"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
              
                <md-input-container>
                  <label>Email</label>
                  <input  ng-model="ctrl.case.borrower.email"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
              </div>
            </div>
      </md-card-content>
    </md-card>
  </div>
    <!-- End Borrower Card-->
  
   <!-- Property Card-->
    <div flex-gt-sm="80">
      <md-card >
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Property</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
              <div layout-xs="column" flex layout-gt-xs="row" layout-wrap>
                
                <md-input-container flex-gt-xs="40" flex-offset="5">
                  <label >Address</label>
                  <textarea ng-model="ctrl.case.property.address"
                            style="text-align:left" 
                            max-rows="3"  
                            ng-readonly="!ctrl.isActiveEdit">
                          {{ctrl.case.property.address}}
                  </textarea>
                </md-input-container>
                
                <md-input-container flex-gt-xs="40" flex-offset="5">
                  <label >Current Owner</label>
  
                  <input  ng-model="ctrl.case.property.owner"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
                
                <md-input-container flex-gt-xs="40" flex-offset="5">
                  <label>County</label>
                  <md-select ng-model="ctrl.case.property.county" >
                    <md-option ng-repeat="county in ctrl.Counties" 
                                ng-value="county"
                                ng-selected="county === '{{ctrl.case.property.county}}'" 
                                ng-disabled="county != '{{ctrl.case.property.county}}' && !ctrl.isActiveEdit">
                          {{county}}
                    </md-option>  
                  </md-select>
                </md-input-container>
  
                <md-input-container flex-gt-xs="40" flex-offset="5">
                  <label>Tax Id:</label>
                  <input  ng-model="ctrl.case.property.taxId"
                          type="text" 
                          ng-readonly="!ctrl.isActiveEdit">
                </md-input-container>
                
                <div flex-gt-xs="90" flex-offset="5" layout="column" style="max-height:15em;overflow:auto">
                  <md-input-container flex>  
                    <label>Legal Description</label>
                    <textarea ng-model="ctrl.case.property.legalDescription" 
                              ng-readonly="!ctrl.isActiveEdit">
                              {{ctrl.case.property.legalDescription}} </textarea>
                  </md-input-container>
                </div>
  
              </div>
              
        </md-card-content>
      </md-card> 
    </div>  
    <!-- End Property card -->
  
  
    <!-- Loan & Trust Deed Card-->
    <div flex-gt-sm="80">
      <md-card >
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Loan &amp; Trust Deed</span>
          </md-card-title-text>
        </md-card-title>
      
        <md-card-content>
          
         <div layout-xs="column" layout="row" layout-wrap>
          <md-input-container flex-gt-xs="25" flex-offset="5">
               <label>Amount:</label>
               <input  ng-model="ctrl.case.loan.amount"
                       type="text" 
                       value="{{ctrl.case.loan.amount | currency : "$" : 0 }}"
                       ng-readonly="!ctrl.isActiveEdit">
          </md-input-container>
           
          <md-input-container flex-gt-xs="30" flex-offset="5" > 
  
               <label>Recorded:</label>
              <md-datepicker ng-model="ctrl.case.loan.DOT.recorded" 
                  ng-disabled="!ctrl.isActiveEdit"
                  ng-click="ctrl.positionDatepicker($event)">
               
          </md-input-container>
           
          <md-input-container flex-gt-xs="30" flex-offset="5">
               <label>Entry Number:</label>
               <input  ng-model="ctrl.case.loan.DOT.entry"
                       type="text" 
                       ng-readonly="!ctrl.isActiveEdit">
          </md-input-container>
        </div>
         <div layout-xs="column" layout="row"> 
           <md-input-container flex-gt-xs="45" flex-offset="5">
               <label>Original Beneficiary:</label>
               <input  ng-model="ctrl.case.loan.DOT.origBeneficiary"
                       type="text" 
                       ng-readonly="!ctrl.isActiveEdit">
           </md-input-container>
           
           <md-input-container flex-gt-xs="45" flex-offset="5">
               <label>Original Trustee:</label>
               <input  ng-model="ctrl.case.loan.DOT.origTrustee"
                       type="text" 
                       ng-readonly="!ctrl.isActiveEdit">
           </md-input-container>
        </div>
  
          <div layout="column">
            <h4 ng-hide="!ctrl.case.loan.assignments" flex="90" flex-offset="5">Assignments</h4>
              <div  ng-repeat="assignment in ctrl.case.loan.assignments" 
                    layout-xs="column" layout-gt-xs="row" flex layout-wrap>
                <md-input-container flex-gt-xs="25" flex-offset="5">
                  
                    <label>recorded</label>
                    <md-datepicker ng-model="assignment.recorded"
                            ng-disabled="!ctrl.isActiveEdit"
                            ng-click="ctrl.positionDatepicker($event)">
                    </md-datepicker>
                   
                </md-input-container>
                <md-input-container flex-gt-xs="25" flex-offset="5">
                    <label>entry</label>
                    <input  ng-model="assignment.entry"
                            type="text" 
                            ng-readonly="!ctrl.isActiveEdit">
                  </md-input-container>
                <md-input-container flex-gt-xs="35" flex-offset="5">
                    <label>Assignee</label>
                    <input  ng-model="assignment.assignee"
                            type="text" 
                            ng-readonly="!ctrl.isActiveEdit">
                  </md-input-container>
              </div>
          </div>
  
        </md-card-content>
      </md-card>
    </div>
    <!-- End Loan & Trust Deed Card -->
</md-content>
</div>
